<h2>Metodi di Connessione alle VM Azure</h2>
<p>Azure offre diversi metodi per connettersi alle Virtual Machine, ciascuno con caratteristiche di sicurezza e
  usabilit√† specifiche.</p>

<!-- Diagramma connessione -->
<svg viewBox="0 0 650 280"
  style="width:100%;max-width:650px;margin:24px auto;display:block;background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);border-radius:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);">
  <!-- User -->
  <circle cx="60" cy="140" r="30" fill="#6366f1" />
  <text x="60" y="145" fill="white" font-size="11" text-anchor="middle" font-weight="bold">User</text>
  <!-- Internet -->
  <rect x="130" y="105" width="80" height="70" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" />
  <text x="170" y="145" fill="#92400e" font-size="10" text-anchor="middle" font-weight="bold">Internet</text>
  <!-- Azure Cloud -->
  <rect x="250" y="20" width="380" height="240" rx="12" fill="#eff6ff" stroke="#3b82f6" stroke-width="2" />
  <text x="440" y="45" fill="#1e40af" font-size="12" text-anchor="middle" font-weight="bold">Azure Cloud</text>
  <!-- Bastion -->
  <rect x="280" y="70" width="120" height="60" rx="8" fill="#c7d2fe" stroke="#6366f1" stroke-width="2" />
  <text x="340" y="95" fill="#4338ca" font-size="10" text-anchor="middle" font-weight="bold">Azure Bastion</text>
  <text x="340" y="110" fill="#6366f1" font-size="8" text-anchor="middle">AzureBastionSubnet</text>
  <!-- VNet -->
  <rect x="280" y="150" width="320" height="90" rx="8" fill="white" stroke="#e2e8f0" stroke-width="2" />
  <text x="440" y="170" fill="#64748b" font-size="9" text-anchor="middle">Virtual Network</text>
  <!-- VM Windows -->
  <rect x="300" y="185" width="90" height="45" rx="6" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" />
  <text x="345" y="205" fill="#1e40af" font-size="9" text-anchor="middle" font-weight="bold">Windows VM</text>
  <text x="345" y="220" fill="#3b82f6" font-size="8" text-anchor="middle">RDP:3389</text>
  <!-- VM Linux -->
  <rect x="410" y="185" width="90" height="45" rx="6" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" />
  <text x="455" y="205" fill="#92400e" font-size="9" text-anchor="middle" font-weight="bold">Linux VM</text>
  <text x="455" y="220" fill="#f59e0b" font-size="8" text-anchor="middle">SSH:22</text>
  <!-- VM No IP -->
  <rect x="520" y="185" width="70" height="45" rx="6" fill="#f0fdf4" stroke="#16a34a" stroke-width="2" />
  <text x="555" y="205" fill="#166534" font-size="9" text-anchor="middle" font-weight="bold">Private</text>
  <text x="555" y="220" fill="#16a34a" font-size="8" text-anchor="middle">No PIP</text>
  <!-- Arrows -->
  <path d="M90 140 L125 140" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)" />
  <path d="M215 140 L275 100" stroke="#6366f1" stroke-width="2" marker-end="url(#arrow)" />
  <path d="M340 130 L345 180" stroke="#6366f1" stroke-width="2" marker-end="url(#arrow)" />
  <path d="M340 130 L455 180" stroke="#6366f1" stroke-width="2" marker-end="url(#arrow)" stroke-dasharray="4" />
  <path d="M340 130 L555 180" stroke="#16a34a" stroke-width="2" marker-end="url(#arrow)" />
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
    </marker>
  </defs>
</svg>

<h3>Metodi di Connessione a Confronto</h3>
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin:20px 0;">
  <div
    style="background:linear-gradient(135deg,#eff6ff,#dbeafe);border-left:4px solid #3b82f6;border-radius:12px;padding:20px;">
    <h4 style="margin:0 0 8px 0;color:#1e40af;font-size:15px;">üñ•Ô∏è RDP (Remote Desktop)</h4>
    <ul style="margin:0;padding-left:20px;color:#334155;font-size:14px;">
      <li><strong>Porta</strong>: TCP 3389</li>
      <li><strong>OS</strong>: Windows VM</li>
      <li>Richiede IP pubblico o VPN</li>
      <li>Client: mstsc.exe, Remote Desktop</li>
      <li>‚ö†Ô∏è Espone porta pubblicamente</li>
    </ul>
  </div>
  <div
    style="background:linear-gradient(135deg,#fef3c7,#fde68a);border-left:4px solid #f59e0b;border-radius:12px;padding:20px;">
    <h4 style="margin:0 0 8px 0;color:#92400e;font-size:15px;">üêß SSH (Secure Shell)</h4>
    <ul style="margin:0;padding-left:20px;color:#334155;font-size:14px;">
      <li><strong>Porta</strong>: TCP 22</li>
      <li><strong>OS</strong>: Linux VM</li>
      <li>Autenticazione: password o chiave</li>
      <li>Client: ssh, PuTTY, Terminal</li>
      <li>‚ö†Ô∏è Espone porta pubblicamente</li>
    </ul>
  </div>
  <div
    style="background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-left:4px solid #16a34a;border-radius:12px;padding:20px;">
    <h4 style="margin:0 0 8px 0;color:#166534;font-size:15px;">üîê Azure Bastion</h4>
    <ul style="margin:0;padding-left:20px;color:#334155;font-size:14px;">
      <li><strong>Accesso via browser</strong> (HTML5)</li>
      <li>Nessun IP pubblico sulla VM</li>
      <li>Supporta RDP e SSH</li>
      <li>Comunicazione TLS su porta 443</li>
      <li>‚úÖ Sicurezza enterprise</li>
    </ul>
  </div>
  <div
    style="background:linear-gradient(135deg,#faf5ff,#ede9fe);border-left:4px solid #8b5cf6;border-radius:12px;padding:20px;">
    <h4 style="margin:0 0 8px 0;color:#6d28d9;font-size:15px;">üîß Serial Console</h4>
    <ul style="margin:0;padding-left:20px;color:#334155;font-size:14px;">
      <li>Accesso diretto al boot</li>
      <li>Per troubleshooting</li>
      <li>Funziona anche se VM non risponde</li>
      <li>Non richiede networking</li>
      <li>‚úÖ Emergency access</li>
    </ul>
  </div>
</div>

<h3>Azure Bastion in Dettaglio</h3>
<p>Azure Bastion √® un servizio <strong>PaaS</strong> fully managed che fornisce accesso sicuro alle VM tramite il
  portale Azure, senza necessit√† di IP pubblici sulle VM.</p>

<div style="overflow-x:auto;margin:20px 0;">
  <table
    style="width:100%;border-collapse:separate;border-spacing:0;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);">
    <thead>
      <tr style="background:linear-gradient(135deg,#4f46e5,#7c3aed);">
        <th style="padding:14px 16px;text-align:left;color:white;font-weight:600;">SKU</th>
        <th style="padding:14px 16px;text-align:left;color:white;font-weight:600;">Connessioni</th>
        <th style="padding:14px 16px;text-align:left;color:white;font-weight:600;">Funzionalit√†</th>
      </tr>
    </thead>
    <tbody>
      <tr style="background:#f5f3ff;">
        <td style="padding:12px 16px;border-bottom:1px solid #e2e8f0;font-weight:600;color:#6366f1;">Basic</td>
        <td style="padding:12px 16px;border-bottom:1px solid #e2e8f0;">2 concurrent</td>
        <td style="padding:12px 16px;border-bottom:1px solid #e2e8f0;">RDP/SSH base, Copy/Paste</td>
      </tr>
      <tr style="background:#eff6ff;">
        <td style="padding:12px 16px;font-weight:600;color:#3b82f6;">Standard</td>
        <td style="padding:12px 16px;">25+ (scalabile)</td>
        <td style="padding:12px 16px;">+ Native client, File upload/download, Shareable links, IP-based connection</td>
      </tr>
    </tbody>
  </table>
</div>

<h3>Requisiti Azure Bastion</h3>
<div style="background:white;border:2px solid #e2e8f0;border-radius:12px;padding:20px;margin:20px 0;">
  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;">
    <div style="text-align:center;padding:16px;">
      <div style="font-size:32px;margin-bottom:8px;">üåê</div>
      <div style="font-weight:600;color:#1e293b;">Subnet dedicata</div>
      <div style="font-size:13px;color:#64748b;margin-top:4px;">Nome: <code
          style="background:#f1f5f9;padding:2px 6px;border-radius:4px;">AzureBastionSubnet</code></div>
    </div>
    <div style="text-align:center;padding:16px;">
      <div style="font-size:32px;margin-bottom:8px;">üìê</div>
      <div style="font-weight:600;color:#1e293b;">Dimensione minima</div>
      <div style="font-size:13px;color:#64748b;margin-top:4px;">/26 o superiore (64 IP)</div>
    </div>
    <div style="text-align:center;padding:16px;">
      <div style="font-size:32px;margin-bottom:8px;">üîí</div>
      <div style="font-weight:600;color:#1e293b;">IP Pubblico</div>
      <div style="font-size:13px;color:#64748b;margin-top:4px;">Standard SKU, Static</div>
    </div>
  </div>
</div>

<h3>Comandi CLI per la Connessione</h3>
<div
  style="background:linear-gradient(135deg,#1e293b,#0f172a);border-radius:12px;padding:20px;margin:20px 0;overflow-x:auto;">
  <pre
    style="margin:0;color:#e2e8f0;font-size:13px;line-height:1.6;font-family:'Consolas','Monaco',monospace;"><code><span style="color:#94a3b8;"># Connettersi via SSH con Azure CLI</span>
<span style="color:#38bdf8;">az ssh vm</span> <span style="color:#fbbf24;">--resource-group</span> MyRG <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--name</span> MyLinuxVM

<span style="color:#94a3b8;"># Creare Azure Bastion</span>
<span style="color:#38bdf8;">az network bastion create</span> <span style="color:#fbbf24;">--name</span> MyBastion <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--resource-group</span> MyRG <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--vnet-name</span> MyVNet <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--public-ip-address</span> MyBastionIP

<span style="color:#94a3b8;"># Ottenere IP pubblico della VM</span>
<span style="color:#38bdf8;">az vm show</span> <span style="color:#fbbf24;">-d</span> <span style="color:#fbbf24;">--resource-group</span> MyRG <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--name</span> MyVM <span style="color:#fbbf24;">--query</span> publicIps <span style="color:#fbbf24;">-o</span> tsv</code></pre>
</div>

<!-- Callout esame -->
<!-- Callout esame -->
<div
  style="background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-left:4px solid #3b82f6;border-radius:12px;padding:20px;margin-top:24px;">
  <div style="display:flex;align-items:flex-start;gap:12px;">
    <span style="font-size:24px;">üìù</span>
    <div>
      <strong style="color:#1e40af;font-size:15px;">Tips per l'Esame AZ-104</strong>
      <ul style="margin:8px 0 0 0;padding-left:20px;color:#1e3a8a;font-size:14px;">
        <li><strong>Azure Bastion</strong> richiede una subnet ESCLUSIVA chiamata <code>AzureBastionSubnet</code> (/26 o
          pi√π grande).</li>
        <li>Bastion NON supporta il VNet Peering nel tier Basic (serve Standard/Premium per IP Connect).</li>
        <li>Se una VM non risponde alla rete (es. firewall errato), usa la <strong>Serial Console</strong> per debug.
        </li>
        <li><strong>JIT (Just-In-Time) VM Access</strong> √® una feature di Defender for Cloud che apre le porte NSG solo
          su richiesta temporanea.</li>
      </ul>
    </div>
  </div>
</div>
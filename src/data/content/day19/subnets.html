<div style="margin-bottom:32px">
  <svg viewBox="0 0 800 320"
    style="width:100%;max-width:800px;background:linear-gradient(135deg,#f0fdf4 0%,#dcfce7 100%);border-radius:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1)">
    <defs>
      <linearGradient id="subnetHeaderGrad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#10b981" />
        <stop offset="100%" style="stop-color:#059669" />
      </linearGradient>
      <filter id="shadowSubnet" x="-20%" y="-20%" width="140%" height="140%">
        <feDropShadow dx="0" dy="4" stdDeviation="4" flood-opacity="0.15" />
      </filter>
    </defs>

    <!-- Title -->
    <text x="400" y="35" text-anchor="middle" font-size="18" font-weight="bold" fill="#166534">Struttura di una Subnet -
      IP Riservati Azure</text>

    <!-- IP Range visualization -->
    <rect x="50" y="60" width="700" height="100" rx="12" fill="white" filter="url(#shadowSubnet)" stroke="#10b981"
      stroke-width="2" />
    <text x="400" y="85" text-anchor="middle" font-size="14" font-weight="600" fill="#166534">Subnet: 10.0.1.0/24 (256
      indirizzi totali)</text>

    <!-- Reserved IPs -->
    <rect x="70" y="100" width="80" height="45" rx="6" fill="#fecaca" />
    <text x="110" y="118" text-anchor="middle" font-size="10" font-weight="600" fill="#991b1b">.0</text>
    <text x="110" y="135" text-anchor="middle" font-size="9" fill="#b91c1c">Network</text>

    <rect x="160" y="100" width="80" height="45" rx="6" fill="#fecaca" />
    <text x="200" y="118" text-anchor="middle" font-size="10" font-weight="600" fill="#991b1b">.1</text>
    <text x="200" y="135" text-anchor="middle" font-size="9" fill="#b91c1c">Gateway</text>

    <rect x="250" y="100" width="80" height="45" rx="6" fill="#fecaca" />
    <text x="290" y="118" text-anchor="middle" font-size="10" font-weight="600" fill="#991b1b">.2, .3</text>
    <text x="290" y="135" text-anchor="middle" font-size="9" fill="#b91c1c">Azure DNS</text>

    <!-- Usable IPs -->
    <rect x="340" y="100" width="270" height="45" rx="6" fill="#bbf7d0" />
    <text x="475" y="118" text-anchor="middle" font-size="10" font-weight="600" fill="#166534">.4 - .254</text>
    <text x="475" y="135" text-anchor="middle" font-size="9" fill="#15803d">251 IP Utilizzabili</text>

    <!-- Broadcast -->
    <rect x="620" y="100" width="80" height="45" rx="6" fill="#fecaca" />
    <text x="660" y="118" text-anchor="middle" font-size="10" font-weight="600" fill="#991b1b">.255</text>
    <text x="660" y="135" text-anchor="middle" font-size="9" fill="#b91c1c">Broadcast</text>

    <!-- Formula box -->
    <rect x="50" y="180" width="320" height="120" rx="12" fill="white" filter="url(#shadowSubnet)" stroke="#10b981"
      stroke-width="2" />
    <text x="210" y="210" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">Formula IP
      Utilizzabili</text>
    <text x="210" y="240" text-anchor="middle" font-size="13" fill="#374151">IP Totali = 2^(32-prefix)</text>
    <text x="210" y="265" text-anchor="middle" font-size="13" fill="#374151">IP Usabili = Totali - 5</text>
    <text x="210" y="290" text-anchor="middle" font-size="12" fill="#6b7280">/24 = 256 - 5 = 251 usabili</text>

    <!-- Subnet types -->
    <rect x="400" y="180" width="350" height="120" rx="12" fill="white" filter="url(#shadowSubnet)" stroke="#10b981"
      stroke-width="2" />
    <text x="575" y="210" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">Subnet Speciali</text>
    <text x="420" y="240" font-size="12" fill="#374151">&#8226; <tspan font-weight="600">GatewaySubnet</tspan>: per
      VPN/ExpressRoute</text>
    <text x="420" y="265" font-size="12" fill="#374151">&#8226; <tspan font-weight="600">AzureFirewallSubnet</tspan>:
      /26 minimo</text>
    <text x="420" y="290" font-size="12" fill="#374151">&#8226; <tspan font-weight="600">AzureBastionSubnet</tspan>: /26
      minimo</text>
  </svg>
</div>

<h3 style="color:#166534;margin-bottom:16px;font-size:20px">Cosa sono le Subnet?</h3>
<p style="font-size:16px;line-height:1.8;margin-bottom:24px">
  Le <strong>subnet</strong> permettono di segmentare una VNet in reti piu piccole per organizzazione, sicurezza
  e isolamento del traffico. Ogni subnet ha un proprio range CIDR all'interno dello spazio indirizzi della VNet.
</p>

<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:32px">
  <div
    style="background:linear-gradient(135deg,#eff6ff,#dbeafe);border-left:4px solid #3b82f6;border-radius:12px;padding:20px">
    <h4 style="margin:0 0 12px 0;color:#1e40af">Segmentazione</h4>
    <p style="margin:0;color:#1e3a8a;font-size:14px;line-height:1.6">
      Dividi la rete per tier (frontend, backend, database) o per funzione (web, app, management).
    </p>
  </div>
  <div
    style="background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-left:4px solid #22c55e;border-radius:12px;padding:20px">
    <h4 style="margin:0 0 12px 0;color:#166534">Sicurezza con NSG</h4>
    <p style="margin:0;color:#14532d;font-size:14px;line-height:1.6">
      Applica Network Security Groups a livello di subnet per controllare il traffico tra i segmenti.
    </p>
  </div>
  <div
    style="background:linear-gradient(135deg,#faf5ff,#f3e8ff);border-left:4px solid #a855f7;border-radius:12px;padding:20px">
    <h4 style="margin:0 0 12px 0;color:#6b21a8">Route Tables</h4>
    <p style="margin:0;color:#581c87;font-size:14px;line-height:1.6">
      Associa User Defined Routes (UDR) per personalizzare il routing del traffico.
    </p>
  </div>
  <div
    style="background:linear-gradient(135deg,#fef3c7,#fde68a);border-left:4px solid #f59e0b;border-radius:12px;padding:20px">
    <h4 style="margin:0 0 12px 0;color:#92400e">Service Delegation</h4>
    <p style="margin:0;color:#78350f;font-size:14px;line-height:1.6">
      Delega subnet a servizi Azure specifici (App Service, Container Instances, SQL MI).
    </p>
  </div>
</div>

<h3 style="color:#166534;margin-bottom:16px;font-size:20px">Tabella IP Riservati per Dimensione Subnet</h3>
<table
  style="width:100%;border-collapse:separate;border-spacing:0;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);margin-bottom:32px">
  <thead>
    <tr style="background:linear-gradient(135deg,#4f46e5,#7c3aed)">
      <th style="padding:14px;text-align:left;color:white;font-weight:600">CIDR</th>
      <th style="padding:14px;text-align:left;color:white;font-weight:600">IP Totali</th>
      <th style="padding:14px;text-align:left;color:white;font-weight:600">IP Usabili</th>
      <th style="padding:14px;text-align:left;color:white;font-weight:600">Uso Consigliato</th>
    </tr>
  </thead>
  <tbody>
    <tr style="background:#f8fafc">
      <td style="padding:12px;border-bottom:1px solid #e2e8f0"><code
          style="background:#e0e7ff;padding:3px 6px;border-radius:4px">/29</code></td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">8</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0;font-weight:600;color:#dc2626">3</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">Minima, point-to-point</td>
    </tr>
    <tr style="background:white">
      <td style="padding:12px;border-bottom:1px solid #e2e8f0"><code
          style="background:#e0e7ff;padding:3px 6px;border-radius:4px">/27</code></td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">32</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0;font-weight:600;color:#059669">27</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">Gateway, Bastion</td>
    </tr>
    <tr style="background:#f8fafc">
      <td style="padding:12px;border-bottom:1px solid #e2e8f0"><code
          style="background:#e0e7ff;padding:3px 6px;border-radius:4px">/26</code></td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">64</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0;font-weight:600;color:#059669">59</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">Azure Firewall</td>
    </tr>
    <tr style="background:white">
      <td style="padding:12px;border-bottom:1px solid #e2e8f0"><code
          style="background:#e0e7ff;padding:3px 6px;border-radius:4px">/24</code></td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">256</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0;font-weight:600;color:#059669">251</td>
      <td style="padding:12px;border-bottom:1px solid #e2e8f0">Workload standard</td>
    </tr>
    <tr style="background:#f8fafc">
      <td style="padding:12px"><code style="background:#e0e7ff;padding:3px 6px;border-radius:4px">/16</code></td>
      <td style="padding:12px">65,536</td>
      <td style="padding:12px;font-weight:600;color:#059669">65,531</td>
      <td style="padding:12px">VNet address space</td>
    </tr>
  </tbody>
</table>

<!-- Callout esame -->
<div
  style="background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-left:4px solid #3b82f6;border-radius:12px;padding:20px;margin-top:24px;">
  <div style="display:flex;align-items:flex-start;gap:12px;">
    <span style="font-size:24px;">üìù</span>
    <div>
      <strong style="color:#1e40af;font-size:15px;">Tips per l'Esame AZ-104</strong>
      <ul style="margin:8px 0 0 0;padding-left:20px;color:#1e3a8a;font-size:14px;">
        <li>Azure riserva sempre <strong>5 indirizzi IP</strong> per ogni subnet: x.x.x.0 (network), .1 (gateway), .2 &
          .3 (Azure DNS), .255 (broadcast).</li>
        <li>La subnet pi√π piccola supportata √® <strong>/29</strong> (8 IP totali - 5 riservati = 3 utilizzabili).</li>
        <li>Le subnet speciali richiedono nomi esatti (es. <code>GatewaySubnet</code>, <code>AzureBastionSubnet</code>,
          <code>AzureFirewallSubnet</code>).</li>
        <li>Le subnet non possono sovrapporsi all'interno della stessa VNet.</li>
      </ul>
    </div>
  </div>
</div>
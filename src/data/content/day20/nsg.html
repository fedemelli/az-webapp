<h2>Network Security Groups (NSG)</h2>
<p>Un <strong>NSG</strong> √® un firewall stateful semplice che filtra il traffico di rete da e verso le risorse Azure in
  una VNet. Pu√≤ essere associato a una <strong>Subnet</strong> o a una <strong>Network Interface (NIC)</strong>.</p>

<h3>Come funzionano le Regole</h3>
<svg viewBox="0 0 600 280"
  style="width:100%;max-width:600px;margin:24px auto;display:block;background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);border-radius:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);">
  <!-- NSG Box -->
  <rect x="150" y="40" width="300" height="200" rx="12" fill="#eff6ff" stroke="#3b82f6" stroke-width="2" />
  <text x="300" y="65" text-anchor="middle" font-weight="bold" fill="#1e40af">Network Security Group</text>

  <!-- Inbound Rules -->
  <rect x="170" y="80" width="260" height="60" rx="8" fill="white" stroke="#22c55e" />
  <text x="300" y="100" text-anchor="middle" font-weight="bold" font-size="12" fill="#166534">Inbound Rules</text>
  <text x="300" y="120" text-anchor="middle" font-size="10" fill="#14532d">100: Allow SSH (22)</text>
  <text x="300" y="135" text-anchor="middle" font-size="10" fill="#14532d">65000: Deny All</text>

  <!-- Outbound Rules -->
  <rect x="170" y="160" width="260" height="60" rx="8" fill="white" stroke="#f59e0b" />
  <text x="300" y="180" text-anchor="middle" font-weight="bold" font-size="12" fill="#92400e">Outbound Rules</text>
  <text x="300" y="200" text-anchor="middle" font-size="10" fill="#78350f">100: Allow SQL (1433)</text>
  <text x="300" y="215" text-anchor="middle" font-size="10" fill="#78350f">65000: Allow Internet</text>

  <!-- Traffic Arrows -->
  <path d="M50 110 L150 110" stroke="#22c55e" stroke-width="4" marker-end="url(#arrow20)" />
  <text x="100" y="100" text-anchor="middle" font-size="11" fill="#166534">Traffic In</text>

  <path d="M450 190 L550 190" stroke="#f59e0b" stroke-width="4" marker-end="url(#arrow20)" />
  <text x="500" y="180" text-anchor="middle" font-size="11" fill="#92400e">Traffic Out</text>

  <defs>
    <marker id="arrow20" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
    </marker>
  </defs>
</svg>

<h3>Elementi di una Regola</h3>
<ul>
  <li><strong>Priority</strong>: Numero tra 100 e 4096. Numeri pi√π bassi hanno priorit√† pi√π alta (vengono processati
    prima).</li>
  <li><strong>Source / Destination</strong>: IP, CIDR, Service Tag (es. <code>Internet</code>,
    <code>VirtualNetwork</code>) o ASG.</li>
  <li><strong>Protocol</strong>: TCP, UDP, ICMP, Any.</li>
  <li><strong>Action</strong>: Allow o Deny.</li>
</ul>

<!-- Callout esame -->
<div
  style="background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-left:4px solid #3b82f6;border-radius:12px;padding:20px;margin-top:24px;">
  <div style="display:flex;align-items:flex-start;gap:12px;">
    <span style="font-size:24px;">üìù</span>
    <div>
      <strong style="color:#1e40af;font-size:15px;">Tips per l'Esame AZ-104</strong>
      <ul style="margin:8px 0 0 0;padding-left:20px;color:#1e3a8a;font-size:14px;">
        <li>Le regole con <strong>Priorit√† pi√π bassa</strong> (es. 100) vincono su quelle pi√π alte (es. 200).</li>
        <li>C'√® una regola di default <strong>Deny All Inbound</strong> nascosta (priorit√† 65500) che blocca tutto il
          traffico esterno non esplicitamente permesso.</li>
        <li>NSG √® <strong>Stateful</strong>: se permetti una richiesta in ingresso (Inbound), la risposta (Outbound) √®
          automaticamente permessa.</li>
        <li>Puoi associare un NSG a una Subnet o a una NIC, ma per gestione semplice si preferisce la
          <strong>Subnet</strong>.</li>
      </ul>
    </div>
  </div>
</div>
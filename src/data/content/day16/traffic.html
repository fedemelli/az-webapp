<h2>Traffic Routing (Testing in Production)</h2>
<p>Puoi instradare una percentuale del traffico di produzione verso uno slot di staging per testare nuove funzionalit√†
  con utenti reali (Canary Deployment).</p>

<h3>Comandi CLI</h3>
<div
  style="background:linear-gradient(135deg,#1e293b,#0f172a);border-radius:12px;padding:20px;margin:20px 0;overflow-x:auto;">
  <pre
    style="margin:0;color:#e2e8f0;font-size:13px;line-height:1.6;font-family:'Consolas','Monaco',monospace;"><code><span style="color:#94a3b8;"># Creare uno slot di staging</span>
<span style="color:#38bdf8;">az webapp deployment slot create</span> <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--name</span> MyUniqueApp <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--resource-group</span> MyRG <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--slot</span> staging

<span style="color:#94a3b8;"># Configurare traffico al 10% su staging</span>
<span style="color:#38bdf8;">az webapp traffic-routing set</span> <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--resource-group</span> MyRG <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--name</span> MyUniqueApp <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--distribution</span> staging=10

<span style="color:#94a3b8;"># Eseguire lo swap in produzione</span>
<span style="color:#38bdf8;">az webapp deployment slot swap</span> <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--resource-group</span> MyRG <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--name</span> MyUniqueApp <span style="color:#a78bfa;">\\</span>
  <span style="color:#fbbf24;">--slot</span> staging <span style="color:#fbbf24;">--target-slot</span> production</code></pre>
</div>

<!-- Callout esame -->
<div
  style="background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-left:4px solid #3b82f6;border-radius:12px;padding:20px;margin-top:24px;">
  <div style="display:flex;align-items:flex-start;gap:12px;">
    <span style="font-size:24px;">üìù</span>
    <div>
      <strong style="color:#1e40af;font-size:15px;">Tips per l'Esame AZ-104</strong>
      <ul style="margin:8px 0 0 0;padding-left:20px;color:#1e3a8a;font-size:14px;">
        <li>Con il <strong>Traffic Routing</strong>, gli utenti vengono assegnati casualmente a uno slot in base alla
          percentuale.</li>
        <li>Viene usato un cookie (<code>x-ms-routing-name</code>) per mantenere la sessione dell'utente sullo stesso
          slot (session affinity).</li>
        <li>Puoi forzare l'accesso a uno specifico slot via query string: <code>?x-ms-routing-name=staging</code>.</li>
      </ul>
    </div>
  </div>
</div>